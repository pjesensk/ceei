name: CEEI jobs release

on:
  workflow_dispatch:
  push:
    paths:
      - africa.py

jobs:
  release:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - name: Set up Python 
      uses: actions/setup-python@v3
    - name: Install dependencies
      run: |
        sudo apt-get update
        sudo apt-get install curl gdal-bin libgdal-dev 
        python3 -m pip install --upgrade pip
        python3 -m pip install -r requirements
    - name: Analysing the code with pylint
      run: |
        echo "Skipping pylint for now"
        # pylint africa.py
    - name: Download data for processing
      run: |
        echo "TODO"
    - name: Publish release
      uses: softprops/action-gh-release@v2
      #if: startsWith(github.ref, 'refs/tags/')
      with:
        files: |
          ceei_jobs.csv
